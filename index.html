<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimion Soul | RPG Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        soul: {
                            900: '#0f0c1a', // Dark background
                            800: '#1a162e', // Card background
                            700: '#2d2447', // Borders
                            500: '#6366f1', // Primary Soul Color (Indigo)
                            400: '#818cf8', // Lighter accent
                            300: '#a5b4fc', // Text accent
                            100: '#e0e7ff', // Text light
                        },
                        accent: {
                            gold: '#ffd700',
                            cyan: '#22d3ee',
                            red: '#ef4444', // For Bosses
                        }
                    },
                    fontFamily: {
                        heading: ['Cinzel', 'serif'],
                        body: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(to bottom right, #050505, #0f0c1a, #130f24);
            color: #e2e8f0;
        }
        /* Glassmorphism utilities */
        .glass {
            background: rgba(26, 22, 46, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .glass-nav {
            background: rgba(5, 5, 5, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
        }
        .text-glow {
            text-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
        }
        .card-hover {
            transition: all 0.4s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px -15px rgba(99, 102, 241, 0.3);
            border-color: rgba(99, 102, 241, 0.5);
        }
        /* Chat Scrollbar */
        .chat-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .chat-scroll::-webkit-scrollbar-thumb {
            background: #4f46e5; 
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #2d2447; 
            border-radius: 4px;
        }
        /* Modal Transition */
        #adventure-modal.open {
            opacity: 1;
            pointer-events: auto;
        }
        #adventure-modal.open #modal-content {
            transform: scale(1);
        }
        /* Tab Active State */
        .tab-active {
            background-color: rgba(99, 102, 241, 0.2);
            border-color: #6366f1;
            color: white;
        }
    </style>
</head>
<body class="font-body min-h-screen flex flex-col selection:bg-soul-500 selection:text-white">

    <!-- Navigation -->
    <nav class="glass-nav fixed w-full z-50">
        <div class="container mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center space-x-3 mb-4 md:mb-0 group cursor-pointer" onclick="showSection('home')">
                <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-soul-500 to-accent-cyan flex items-center justify-center shadow-[0_0_15px_rgba(99,102,241,0.5)] group-hover:animate-pulse-slow">
                    <span class="text-xl">üåå</span>
                </div>
                <div class="flex flex-col">
                    <h1 class="font-heading text-2xl font-bold tracking-widest text-white text-glow">DIMION SOUL</h1>
                    <span class="text-[10px] uppercase tracking-[0.2em] text-soul-300">RPG Companion</span>
                </div>
            </div>
            
            <div class="flex space-x-2 md:space-x-4 overflow-x-auto max-w-full pb-1 md:pb-0 items-center">
                <button onclick="showSection('home')" class="nav-btn px-3 py-1 text-sm md:text-base hover:text-soul-400 transition whitespace-nowrap">In√≠cio</button>
                <button onclick="showSection('races')" class="nav-btn px-3 py-1 text-sm md:text-base hover:text-soul-400 transition whitespace-nowrap">Ra√ßas</button>
                <button onclick="showSection('classes')" class="nav-btn px-3 py-1 text-sm md:text-base hover:text-soul-400 transition whitespace-nowrap">Classes</button>
                <button onclick="showSection('bestiary')" class="nav-btn px-3 py-1 text-sm md:text-base hover:text-accent-red transition whitespace-nowrap text-accent-red font-bold">Besti√°rio</button>
                <button onclick="showSection('backgrounds')" class="nav-btn px-3 py-1 text-sm md:text-base hover:text-soul-400 transition whitespace-nowrap text-soul-300">Antecedentes</button>
                <button onclick="showSection('adventures')" class="nav-btn px-3 py-1 text-sm md:text-base hover:text-soul-400 transition whitespace-nowrap text-accent-cyan">Aventuras</button>
                <button onclick="showSection('campaigns')" class="nav-btn px-3 py-1 text-sm md:text-base hover:text-soul-400 transition whitespace-nowrap">Mestre</button>
                <button onclick="showSection('dice')" class="ml-2 px-4 py-2 bg-gradient-to-r from-soul-500 to-indigo-700 rounded-lg text-white font-bold shadow-lg hover:shadow-indigo-500/50 transition transform hover:scale-105 active:scale-95 text-sm md:text-base whitespace-nowrap">Jogar Dados</button>
            </div>
        </div>
    </nav>

    <!-- Spacer for fixed nav -->
    <div class="h-24"></div>

    <main class="container mx-auto px-6 py-8 flex-grow relative z-10">
        
        <!-- HOME SECTION -->
        <section id="home" class="animate-fade-in flex flex-col items-center justify-center text-center min-h-[60vh]">
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-indigo-600 rounded-full opacity-[0.05] blur-[100px] -z-10 pointer-events-none"></div>
            
            <h2 class="font-heading text-5xl md:text-7xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white via-soul-300 to-soul-500 animate-float">
                Crie sua Lenda
            </h2>
            <p class="text-xl md:text-2xl text-gray-400 max-w-2xl mb-12 font-light">
                O grim√≥rio definitivo para mestres e jogadores. Explore ra√ßas, classes detalhadas, um besti√°rio mortal e forje o destino do seu grupo.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 w-full max-w-6xl">
                <div class="glass p-8 rounded-2xl cursor-pointer card-hover group" onclick="showSection('races')">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition duration-300">üßù</div>
                    <h3 class="font-heading text-xl font-bold text-white mb-2">Ra√ßas</h3>
                    <p class="text-sm text-gray-400">Do nobre humano ao feroz meio-orc.</p>
                </div>
                <div class="glass p-8 rounded-2xl cursor-pointer card-hover group" onclick="showSection('classes')">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition duration-300">‚öîÔ∏è</div>
                    <h3 class="font-heading text-xl font-bold text-white mb-2">Classes</h3>
                    <p class="text-sm text-gray-400">Paladinos, druidas e her√≥is lend√°rios.</p>
                </div>
                 <div class="glass p-8 rounded-2xl cursor-pointer card-hover group" onclick="showSection('bestiary')">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition duration-300">üëπ</div>
                    <h3 class="font-heading text-xl font-bold text-white mb-2">Besti√°rio</h3>
                    <p class="text-sm text-gray-400">Bosses, monstros e criaturas.</p>
                </div>
                <div class="glass p-8 rounded-2xl cursor-pointer card-hover group" onclick="showSection('campaigns')">
                    <div class="text-4xl mb-4 group-hover:scale-110 transition duration-300">ü§ñ</div>
                    <h3 class="font-heading text-xl font-bold text-white mb-2">Mestre & IA</h3>
                    <p class="text-sm text-gray-400">Ferramentas e Chat Inteligente.</p>
                </div>
            </div>
        </section>

        <!-- RACES SECTION -->
        <section id="races" class="hidden">
            <div class="flex items-end justify-between mb-8 border-b border-gray-800 pb-4">
                <div>
                    <h2 class="font-heading text-4xl text-white">Linhagens Antigas</h2>
                    <p class="text-soul-400 text-sm">Os povos que caminham sobre a terra</p>
                </div>
                <div class="text-3xl opacity-50">üåç</div>
            </div>
            <div id="races-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Javascript populated -->
            </div>
        </section>

        <!-- CLASSES SECTION -->
        <section id="classes" class="hidden">
            <div class="flex items-end justify-between mb-8 border-b border-gray-800 pb-4">
                <div>
                    <h2 class="font-heading text-4xl text-white">Caminhos do Destino</h2>
                    <p class="text-soul-400 text-sm">Escolha sua voca√ß√£o e seus segredos arcanos</p>
                </div>
                <div class="text-3xl opacity-50">üõ°Ô∏è</div>
            </div>

            <div class="flex flex-col lg:flex-row gap-8 min-h-[600px]">
                <!-- Sidebar -->
                <div class="lg:w-1/4 h-[600px] overflow-y-auto pr-2 custom-scroll" id="class-list-container">
                     <div class="space-y-2" id="class-list">
                        <!-- JS Populated -->
                     </div>
                </div>
                
                <!-- Content -->
                <div class="lg:w-3/4">
                    <div id="class-detail" class="glass h-full p-8 rounded-2xl relative overflow-hidden overflow-y-auto">
                        <div class="absolute top-0 right-0 w-64 h-64 bg-soul-500 rounded-full blur-[100px] opacity-[0.15] -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
                        <div class="flex h-full items-center justify-center text-gray-500">
                            Selecione uma classe para ver seus segredos.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- BESTIARY SECTION (NEW) -->
        <section id="bestiary" class="hidden">
            <div class="flex items-end justify-between mb-8 border-b border-gray-800 pb-4">
                <div>
                    <h2 class="font-heading text-4xl text-white">Besti√°rio de Dimion</h2>
                    <p class="text-accent-red text-sm">Os horrores que aguardam nas trevas</p>
                </div>
                <div class="text-3xl opacity-50">üëπ</div>
            </div>

            <!-- Bestiary Navigation -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="filterBestiary('boss')" id="btn-boss" class="px-6 py-2 rounded-full border border-gray-700 text-gray-400 hover:text-white hover:border-accent-red transition bg-black/30 font-heading">
                    üíÄ BOSSES
                </button>
                <button onclick="filterBestiary('monsters')" id="btn-monsters" class="px-6 py-2 rounded-full border border-gray-700 text-gray-400 hover:text-white hover:border-purple-500 transition bg-black/30 font-heading">
                    üëÅÔ∏è MONSTROS
                </button>
                <button onclick="filterBestiary('creatures')" id="btn-creatures" class="px-6 py-2 rounded-full border border-gray-700 text-gray-400 hover:text-white hover:border-green-500 transition bg-black/30 font-heading">
                    üêæ CRIATURAS
                </button>
            </div>

            <!-- Grids -->
            <div id="bestiary-content" class="min-h-[500px]">
                <!-- Bosses Grid -->
                <div id="grid-boss" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in">
                    <!-- JS Populated -->
                </div>
                <!-- Monsters Grid -->
                <div id="grid-monsters" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden animate-fade-in">
                    <!-- JS Populated -->
                </div>
                <!-- Creatures Grid -->
                <div id="grid-creatures" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden animate-fade-in">
                    <!-- JS Populated -->
                </div>
            </div>
        </section>

        <!-- BACKGROUNDS SECTION -->
        <section id="backgrounds" class="hidden">
            <div class="flex items-end justify-between mb-8 border-b border-gray-800 pb-4">
                <div>
                    <h2 class="font-heading text-4xl text-white">Origens & Antecedentes</h2>
                    <p class="text-soul-400 text-sm">Quem voc√™ era antes de se tornar uma lenda?</p>
                </div>
                <div class="text-3xl opacity-50">üìú</div>
            </div>
            <div id="backgrounds-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Javascript populated -->
            </div>
        </section>

        <!-- OFFICIAL ADVENTURES SECTION -->
        <section id="adventures" class="hidden">
            <div class="flex items-end justify-between mb-8 border-b border-gray-800 pb-4">
                <div>
                    <h2 class="font-heading text-4xl text-white">Sagas Oficiais</h2>
                    <p class="text-soul-400 text-sm">As campanhas mais perigosas de Faer√ªn e al√©m</p>
                </div>
                <div class="text-3xl opacity-50">üó∫Ô∏è</div>
            </div>
            <div id="adventures-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- JS Populated -->
            </div>
        </section>

        <!-- CAMPAIGNS & CHAT (DM TOOLS) -->
        <section id="campaigns" class="hidden">
             <div class="flex items-end justify-between mb-8 border-b border-gray-800 pb-4">
                <div>
                    <h2 class="font-heading text-4xl text-white">Santu√°rio do Mestre</h2>
                    <p class="text-soul-400 text-sm">Ferramentas de cria√ß√£o e Or√°culo IA</p>
                </div>
                <div class="text-3xl opacity-50">üïØÔ∏è</div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8 h-[600px]">
                
                <!-- Left Column: Tools -->
                <div class="lg:col-span-1 space-y-6 flex flex-col h-full">
                    <!-- Hook Generator -->
                    <div class="glass p-6 rounded-2xl border-l-4 border-accent-cyan flex-1">
                        <h3 class="font-heading text-xl text-white mb-2 flex items-center gap-2">
                            <span class="text-accent-cyan">‚ú¶</span> Ganchos
                        </h3>
                        <div id="hook-display" class="bg-black/30 p-4 rounded-lg min-h-[80px] flex items-center justify-center text-center text-gray-300 text-sm italic mb-4 border border-white/5">
                            "Aguardando inspira√ß√£o..."
                        </div>
                        <button onclick="generateHook()" class="w-full py-2 rounded bg-gray-800 hover:bg-gray-700 text-white text-sm font-semibold transition border border-gray-700 hover:border-accent-cyan">
                            Gerar Ideia
                        </button>
                    </div>

                    <!-- NPC Generator -->
                    <div class="glass p-6 rounded-2xl border-l-4 border-soul-500 flex-1">
                        <h3 class="font-heading text-xl text-white mb-2 flex items-center gap-2">
                            <span class="text-soul-500">‚ú¶</span> NPC R√°pido
                        </h3>
                        <div id="npc-display" class="bg-black/30 p-4 rounded-lg min-h-[80px] mb-4 border border-white/5 space-y-1">
                             <div class="flex justify-between text-xs border-b border-gray-800 pb-1">
                                 <span class="text-gray-500">Nome</span>
                                 <span class="text-white font-mono">-</span>
                             </div>
                             <div class="flex justify-between text-xs border-b border-gray-800 pb-1">
                                 <span class="text-gray-500">Ra√ßa</span>
                                 <span class="text-white font-mono">-</span>
                             </div>
                             <div class="flex justify-between text-xs">
                                 <span class="text-gray-500">Alma</span>
                                 <span class="text-white font-mono">-</span>
                             </div>
                        </div>
                        <button onclick="generateNPC()" class="w-full py-2 rounded bg-gray-800 hover:bg-gray-700 text-white text-sm font-semibold transition border border-gray-700 hover:border-soul-500">
                            Criar NPC
                        </button>
                    </div>
                </div>

                <!-- Right Column: ChatGPT Interface -->
                <div class="lg:col-span-2 glass rounded-2xl flex flex-col overflow-hidden border border-soul-500/30 shadow-[0_0_30px_rgba(99,102,241,0.1)]">
                    <!-- Chat Header -->
                    <div class="bg-soul-900/80 p-4 border-b border-white/10 flex justify-between items-center backdrop-blur-md">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-green-400 to-emerald-600 flex items-center justify-center text-white text-xl shadow-lg">ü§ñ</div>
                            <div>
                                <h3 class="font-heading text-white font-bold">Or√°culo do Mestre (AI)</h3>
                                <p class="text-xs text-emerald-400 flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></span> Online</p>
                            </div>
                        </div>
                        <button onclick="clearChat()" class="text-xs text-gray-500 hover:text-red-400 transition">Limpar Chat</button>
                    </div>

                    <!-- Chat Messages Area -->
                    <div id="chat-messages" class="flex-grow p-6 overflow-y-auto chat-scroll bg-black/20 space-y-4">
                        <!-- Welcome Message -->
                        <div class="flex items-start gap-3">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-emerald-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-lg">AI</div>
                            <div class="bg-soul-800/80 p-3 rounded-2xl rounded-tl-none border border-white/5 text-sm text-gray-200 shadow-md">
                                Ol√°, Mestre. Eu sou o Or√°culo. Posso ajudar a criar encontros, descrever locais ou consultar regras. Minha conex√£o com os planos est√° ativa.
                            </div>
                        </div>
                    </div>

                    <!-- Chat Input Area -->
                    <div class="p-4 bg-soul-900/80 border-t border-white/10 backdrop-blur-md">
                        <div class="flex gap-2">
                            <input type="text" id="chat-input" placeholder="Pergunte ao Or√°culo... (ex: Crie um enigma para uma porta m√°gica)" 
                                   class="flex-grow bg-black/40 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-soul-500 focus:ring-1 focus:ring-soul-500 transition placeholder-gray-600"
                                   onkeypress="handleChatKey(event)">
                            <button onclick="sendMessage()" class="bg-soul-500 hover:bg-soul-600 text-white px-6 py-3 rounded-lg font-bold transition shadow-lg hover:shadow-soul-500/50 flex items-center">
                                ‚û§
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- DICE -->
        <section id="dice" class="hidden flex flex-col items-center justify-center min-h-[60vh]">
            <h2 class="font-heading text-4xl mb-12 text-transparent bg-clip-text bg-gradient-to-br from-white to-gray-500">Sala de Dados</h2>
            
            <div id="dice-container" class="relative w-48 h-48 flex items-center justify-center mb-16">
                <div class="absolute inset-0 bg-soul-500 rounded-full blur-[60px] opacity-20 animate-pulse"></div>
                <div id="dice-result" class="relative z-10 text-8xl font-heading font-bold text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)] transition-all duration-100">
                    -
                </div>
            </div>

            <div class="grid grid-cols-3 md:grid-cols-6 gap-4">
                <button onclick="rollDice(4)" class="dice-btn w-16 h-16 rounded-xl bg-gray-800 border border-gray-700 hover:border-soul-500 hover:bg-gray-700 hover:shadow-[0_0_15px_rgba(99,102,241,0.4)] transition text-gray-300 font-bold">D4</button>
                <button onclick="rollDice(6)" class="dice-btn w-16 h-16 rounded-xl bg-gray-800 border border-gray-700 hover:border-soul-500 hover:bg-gray-700 hover:shadow-[0_0_15px_rgba(99,102,241,0.4)] transition text-gray-300 font-bold">D6</button>
                <button onclick="rollDice(8)" class="dice-btn w-16 h-16 rounded-xl bg-gray-800 border border-gray-700 hover:border-soul-500 hover:bg-gray-700 hover:shadow-[0_0_15px_rgba(99,102,241,0.4)] transition text-gray-300 font-bold">D8</button>
                <button onclick="rollDice(10)" class="dice-btn w-16 h-16 rounded-xl bg-gray-800 border border-gray-700 hover:border-soul-500 hover:bg-gray-700 hover:shadow-[0_0_15px_rgba(99,102,241,0.4)] transition text-gray-300 font-bold">D10</button>
                <button onclick="rollDice(12)" class="dice-btn w-16 h-16 rounded-xl bg-gray-800 border border-gray-700 hover:border-soul-500 hover:bg-gray-700 hover:shadow-[0_0_15px_rgba(99,102,241,0.4)] transition text-gray-300 font-bold">D12</button>
                <button onclick="rollDice(20)" class="dice-btn w-16 h-16 rounded-xl bg-soul-600 border border-soul-400 hover:bg-soul-500 hover:shadow-[0_0_20px_rgba(99,102,241,0.6)] transition text-white font-bold transform hover:scale-110">D20</button>
            </div>
            
            <div id="history-log" class="mt-12 text-sm text-gray-500 font-mono min-h-[20px]"></div>
        </section>

    </main>
    
    <!-- Adventure Modal -->
    <div id="adventure-modal" class="fixed inset-0 z-[60] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="glass w-full max-w-2xl m-4 rounded-2xl overflow-hidden transform scale-95 transition-transform duration-300 border border-soul-500/30 shadow-[0_0_50px_rgba(99,102,241,0.2)]" id="modal-content">
            <div id="modal-header" class="h-40 bg-gradient-to-r from-soul-900 to-black relative flex items-center justify-center">
                 <div class="absolute inset-0 bg-gradient-to-t from-soul-900 to-transparent"></div>
                 <div class="text-8xl opacity-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">üêâ</div>
                <button onclick="closeAdventure()" class="absolute top-4 right-4 w-8 h-8 rounded-full bg-black/50 text-white flex items-center justify-center hover:bg-red-500/80 transition z-20">‚úï</button>
                <h3 id="modal-title" class="relative z-10 font-heading text-4xl font-bold text-white shadow-black drop-shadow-lg text-center px-4">Title</h3>
            </div>
            <div class="p-8 bg-soul-900/90">
                <div class="flex justify-center gap-4 mb-6">
                    <span id="modal-level" class="px-3 py-1 bg-soul-500/20 text-soul-300 text-sm font-bold rounded border border-soul-500/30">Level</span>
                    <span id="modal-theme" class="px-3 py-1 bg-accent-cyan/10 text-accent-cyan text-sm font-bold rounded border border-accent-cyan/30">Theme</span>
                </div>
                <p id="modal-desc" class="text-gray-300 text-lg leading-relaxed mb-8 border-l-4 border-accent-cyan pl-4 text-justify">Description</p>
                
                <div class="grid grid-cols-2 gap-4">
                    <button class="py-3 rounded bg-soul-600 hover:bg-soul-500 text-white font-bold transition shadow-lg hover:shadow-soul-500/50" onclick="alert('Link para loja simulado!')">üõí Adquirir Livro</button>
                    <button onclick="closeAdventure()" class="py-3 rounded bg-gray-800 hover:bg-gray-700 text-gray-300 transition border border-gray-700">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-black py-8 border-t border-gray-900 mt-auto">
        <div class="container mx-auto text-center">
            <h4 class="font-heading text-lg text-white mb-2 tracking-widest">HYBRID STUDIOS</h4>
            <p class="text-gray-600 text-sm">Desenvolvendo mundos digitais.</p>
            <p class="text-gray-700 text-xs mt-4">Dimion Soul &copy; 2025. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- API & SYSTEM ---
        const API_KEY = ""; // Key is provided by the environment

        // --- BESTIARY DATA (EXPANDED) ---
        const bestiary = {
            boss: [
                // DEUSES & ARQUIDEM√îNIOS
                { name: "Tiamat", title: "A Rainha Drag√£o", cr: "CR 30", desc: "A deusa de cinco cabe√ßas presa nos Nove Infernos. Imune a magias de baixo n√≠vel, cospe fogo, raio, veneno, √°cido e gelo.", type: "Arquidem√¥nio" },
                { name: "Vecna", title: "O Arquilich", cr: "CR 26", desc: "O deus dos segredos. Comanda o Livro da Escurid√£o Vil e pode alterar a realidade. Seus artefatos (M√£o e Olho) s√£o lend√°rios.", type: "Morto-Vivo" },
                { name: "Lolth", title: "A Rainha Aranha", cr: "CR 24", desc: "Deusa ca√≥tica dos Drow. Assume a forma de uma bela elfa ou de uma aranha monstruosa. Trai√ßoeira e cruel.", type: "Divindade" },
                { name: "Asmodeus", title: "Lorde dos Nove", cr: "CR 30+", desc: "O governante supremo dos Nove Infernos. Um mestre da manipula√ß√£o, contratos e leis divinas. Raramente luta, mas √© invenc√≠vel se o fizer.", type: "Diabo" },
                { name: "Orcus", title: "Pr√≠ncipe dos Mortos-Vivos", cr: "CR 26", desc: "Lorde Dem√¥nio do Abismo que empunha a Varinha de Orcus. Deseja transformar todo o multiverso em um cemit√©rio silencioso.", type: "Dem√¥nio" },
                { name: "Demogorgon", title: "Pr√≠ncipe dos Dem√¥nios", cr: "CR 26", desc: "O suserano do Abismo com duas cabe√ßas, Aameul e Hethradiah. Sua presen√ßa induz loucura instant√¢nea.", type: "Dem√¥nio" },
                { name: "Zariel", title: "Arquiduquesa de Avernus", cr: "CR 26", desc: "Um anjo ca√≠do consumido pela f√∫ria da Guerra de Sangue. Lidera ex√©rcitos infernais com espada de fogo e asas queimadas.", type: "Diabo" },
                
                // VIL√ïES LEND√ÅRIOS
                { name: "Strahd von Zarovich", title: "O Conde Vampiro", cr: "CR 15", desc: "O mestre de Ravenloft. Um g√™nio t√°tico e necromante que controla a terra, o clima e as bestas de Barovia.", type: "Morto-Vivo" },
                { name: "Acererak", title: "O Lich Eterno", cr: "CR 23", desc: "Viaja entre planos criando masmorras mortais (Tumba dos Horrores) para colher almas e alimentar seus experimentos.", type: "Morto-Vivo" },
                { name: "Xanathar", title: "O Chefe do Crime", cr: "CR 13", desc: "Um Beholder paranoico que governa o submundo de Waterdeep. Protege seu peixinho dourado Sylgar com desintegra√ß√£o.", type: "Aberra√ß√£o" },
                { name: "Halaster Blackcloak", title: "O Mago Louco", cr: "CR 23", desc: "O criador da Undermountain. Vive h√° mil√™nios em sua masmorra, insano e incrivelmente poderoso.", type: "Humanoide" },
                { name: "Lord Soth", title: "Cavaleiro da Rosa Negra", cr: "CR 19", desc: "Um cavaleiro da morte de Dragonlance. Amaldi√ßoado a viver eternamente lembrando de seus pecados.", type: "Morto-Vivo" },
                
                // DRAG√ïES & BESTAS SUPREMAS
                { name: "Tarrasque", title: "Fim do Mundo", cr: "CR 30", desc: "Uma m√°quina de destrui√ß√£o irracional. Devora cidades inteiras e reflete magia com sua carapa√ßa.", type: "Monstruosidade" },
                { name: "Klauth", title: "Velho Snarl", cr: "CR 25", desc: "Um dos drag√µes vermelhos mais antigos de Faer√ªn. Usa varinhas m√°gicas presas √†s suas asas.", type: "Drag√£o" },
                { name: "Iymrith", title: "A Desgra√ßa do Deserto", cr: "CR 23", desc: "Uma drag√£o azul anci√£ e feiticeira poderosa que manipula imp√©rios gigantes das areias.", type: "Drag√£o" }
            ],
            monsters: [
                // CL√ÅSSICOS & PERIGOSOS
                { name: "Beholder", title: "Observador", cr: "CR 13", desc: "Esfera de carne com 11 olhos. Cada olho dispara um raio diferente (morte, petrifica√ß√£o, charme). O olho central anula magia.", type: "Aberra√ß√£o" },
                { name: "Mind Flayer", title: "Illithid", cr: "CR 7", desc: "Devoradores de c√©rebros ps√≠quicos. Escravizam ra√ßas inteiras e podem atordoar grupos inteiros com uma onda mental.", type: "Aberra√ß√£o" },
                { name: "Lich", title: "Mago Morto-Vivo", cr: "CR 21", desc: "Magos que prenderam sua alma em um filact√©rio. Mestres da magia arcana e imortais at√© que o filact√©rio seja destru√≠do.", type: "Morto-Vivo" },
                { name: "Vampiro", title: "Lorde da Noite", cr: "CR 13", desc: "Predadores charmosos e mortais. Regeneram vida, mudam de forma e controlam proles de vampiros menores.", type: "Morto-Vivo" },
                { name: "M√∫mia Real", title: "Guardi√£o da Tumba", cr: "CR 15", desc: "Antigos fara√≥s ou sacerdotes. Sua aura causa medo paralisante e seu toque apodrece a carne.", type: "Morto-Vivo" },
                { name: "Cavaleiro da Morte", title: "Paladino Ca√≠do", cr: "CR 17", desc: "Guerreiros esquel√©ticos que mant√™m suas habilidades marciais e comandam esferas de fogo infernal.", type: "Morto-Vivo" },
                
                // GIGANTES & DRAG√ïES
                { name: "Drag√£o Vermelho", title: "Anci√£o", cr: "CR 24", desc: "O √°pice dos drag√µes crom√°ticos. Vivem em vulc√µes, cospem fogo e s√£o a encarna√ß√£o da gan√¢ncia.", type: "Drag√£o" },
                { name: "Gigante da Tempestade", title: "Or√°culo", cr: "CR 13", desc: "Os mais poderosos dos gigantes. Vivem nas nuvens ou fundos oce√¢nicos e leem o futuro nos raios.", type: "Gigante" },
                { name: "Gigante do Fogo", title: "Ferreiro Mestre", cr: "CR 9", desc: "Mestres da forja e da guerra. Vestem armaduras pesadas e escravizam ra√ßas menores.", type: "Gigante" },
                { name: "Hydra", title: "Cabe√ßas M√∫ltiplas", cr: "CR 8", desc: "Corte uma cabe√ßa, duas nascem no lugar. Um monstro de p√¢ntano voraz e regenerativo.", type: "Monstruosidade" },
                
                // OUTROS PLANOS & ABERRA√á√ïES
                { name: "Balor", title: "General Abissal", cr: "CR 19", desc: "Dem√¥nio de fogo e sombra armado com chicote flamejante e espada. Explode ao morrer.", type: "Dem√¥nio" },
                { name: "Pit Fiend", title: "General Infernal", cr: "CR 20", desc: "Diabo supremo de hierarquia militar. Comanda medo, fogo e veneno.", type: "Diabo" },
                { name: "Rakshasa", title: "Esp√≠rito Maligno", cr: "CR 13", desc: "Dem√¥nios tigres com m√£os invertidas. Imunes a magias de baixo n√≠vel e mestres da ilus√£o.", type: "Dem√¥nio" },
                { name: "Aboleth", title: "Mestre das Profundezas", cr: "CR 10", desc: "Seres aqu√°ticos anteriores aos deuses. Escravizam mentes e transmitem doen√ßas com seus tent√°culos.", type: "Aberra√ß√£o" },
                { name: "Slaad", title: "Caos Encarnado", cr: "CR 5-10", desc: "Criaturas do Limbo parecidas com sapos. Implantam ovos em hospedeiros vivos.", type: "Aberra√ß√£o" },
                
                // MASMORRAS
                { name: "Cubo Gelatinoso", title: "Limpeza de Dungeon", cr: "CR 2", desc: "Transparente e √°cido. Engolfa aventureiros desavisados em corredores estreitos.", type: "Lodo" },
                { name: "Mimic", title: "Ba√∫ Falso", cr: "CR 2", desc: "Predador adesivo que se disfar√ßa de objeto. O pesadelo de todo aventureiro ganancioso.", type: "Monstruosidade" },
                { name: "Roper", title: "Pedra Viva", cr: "CR 5", desc: "Parece uma estalagmite at√© que seus tent√°culos grudentos agarram voc√™ e o arrastam para sua boca.", type: "Monstruosidade" },
                { name: "Umber Hulk", title: "Escavador", cr: "CR 5", desc: "Insetoide gigante que escava t√∫neis. Seu olhar confunde a mente de quem o encara.", type: "Monstruosidade" }
            ],
            creatures: [
                // PEQUENAS AMEA√áAS & BANDOS
                { name: "Goblin", title: "Saqueador", cr: "CR 1/4", desc: "Pequenos, cru√©is e covardes. Perigosos em n√∫meros e mestres em armadilhas e fugas r√°pidas.", type: "Goblin√≥ide" },
                { name: "Kobold", title: "Servo de Drag√£o", cr: "CR 1/8", desc: "Reptilianos fr√°geis que adoram drag√µes. Suas t√°ticas de bando e armadilhas s√£o lend√°rias.", type: "Humanoide" },
                { name: "Orc", title: "Guerreiro Tribal", cr: "CR 1/2", desc: "B√°rbaros selvagens que vivem para a guerra e conquista em nome de Gruumsh.", type: "Humanoide" },
                { name: "Hobgoblin", title: "Soldado", cr: "CR 1/2", desc: "Goblins disciplinados e marciais. Lutam em forma√ß√£o e s√£o estrategistas competentes.", type: "Goblin√≥ide" },
                { name: "Bugbear", title: "Assassino Silencioso", cr: "CR 1", desc: "Primos grandes e peludos dos goblins. Mestres da furtividade e ataques surpresa.", type: "Goblin√≥ide" },
                { name: "Gnoll", title: "Hiena Voraz", cr: "CR 1/2", desc: "Hienas humanoides demon√≠acas que nunca param de comer e matar.", type: "Humanoide" },
                
                // MORTOS-VIVOS COMUNS
                { name: "Esqueleto", title: "Aut√¥mato de Osso", cr: "CR 1/4", desc: "Restos animados. Obedecem ordens literais e n√£o sentem medo ou dor.", type: "Morto-Vivo" },
                { name: "Zumbi", title: "Carne Podre", cr: "CR 1/4", desc: "Lentos e resistentes. Dif√≠ceis de derrubar definitivamente devido √† sua resili√™ncia morta-viva.", type: "Morto-Vivo" },
                { name: "Ghoul", title: "Devorador de Carne", cr: "CR 1", desc: "Mortos-vivos famintos cujas garras paralisam os vivos para serem comidos frescos.", type: "Morto-Vivo" },
                { name: "Shadow", title: "Ladr√£o de For√ßa", cr: "CR 1/2", desc: "Sombras vivas que drenam a for√ßa vital de suas v√≠timas. Mortais se n√£o detectadas.", type: "Morto-Vivo" },
                { name: "Wight", title: "Guerreiro Amaldi√ßoado", cr: "CR 3", desc: "Mortos-vivos inteligentes e marciais que comandam zumbis sob seu servi√ßo.", type: "Morto-Vivo" },
                
                // FLORESTA & SELVAGEM
                { name: "Lobo", title: "Matilha", cr: "CR 1/4", desc: "Predadores eficientes que trabalham em equipe para derrubar presas maiores.", type: "Besta" },
                { name: "Urso-Coruja", title: "Fera H√≠brida", cr: "CR 3", desc: "Corpo de urso, cabe√ßa de coruja. Temperamento horr√≠vel e for√ßa brutal.", type: "Monstruosidade" },
                { name: "Harpia", title: "Can√ß√£o Maldita", cr: "CR 1", desc: "Mulheres-p√°ssaro que atraem viajantes com sua can√ß√£o m√°gica para devor√°-los.", type: "Monstruosidade" },
                { name: "Troll", title: "Regenerador", cr: "CR 5", desc: "Gigantes famintos que curam qualquer ferimento, exceto os causados por fogo ou √°cido.", type: "Gigante" },
                { name: "Ogre", title: "Bruto", cr: "CR 2", desc: "Gigantes est√∫pidos e fortes. Frequentemente usados como for√ßa bruta por orcs ou goblins.", type: "Gigante" },
                { name: "Basilisco", title: "Olhar de Pedra", cr: "CR 3", desc: "Lagartos de oito patas. Encarar seus olhos transforma a v√≠tima em pedra permanentemente.", type: "Monstruosidade" },
                
                // ESPECIAIS & ESTRANHOS
                { name: "Rust Monster", title: "Pesadelo de Ferreiro", cr: "CR 1/2", desc: "Insetoide que corr√≥i e come metais. O terror de guerreiros com armaduras caras.", type: "Monstruosidade" },
                { name: "Stirge", title: "Mosquito Gigante", cr: "CR 1/8", desc: "Pequenos monstros voadores que se fixam na v√≠tima e sugam sangue.", type: "Besta" },
                { name: "Blink Dog", title: "C√£o Teleportador", cr: "CR 1/4", desc: "C√£es fe√©ricos leais e bondosos que podem se teleportar curtas dist√¢ncias.", type: "Fe√©rico" },
                { name: "Imp", title: "Espi√£o Infernal", cr: "CR 1", desc: "Diabos min√∫sculos que ficam invis√≠veis e servem como familiares ou espi√µes.", type: "Diabo" }
            ]
        };

        // ... existing adventures, backgrounds, races, classes arrays ...
        
        const adventures = [
            {
                title: "Curse of Strahd",
                level: "1-10",
                theme: "Terror G√≥tico",
                color: "from-red-900 to-black",
                desc: "Sob nuvens de tempestade furiosas, a figura do vampiro Conde Strahd von Zarovich se destaca nas antigas muralhas do Castelo Ravenloft. Uma aventura cl√°ssica de horror e mist√©rio na terra amaldi√ßoada de Barovia."
            },
            {
                title: "Tomb of Annihilation",
                level: "1-11",
                theme: "Selva & Explora√ß√£o",
                color: "from-green-800 to-yellow-900",
                desc: "Algo maligno est√° aprisionando as almas dos mortos. Aventureiros devem viajar para as selvas de Chult, enfrentar dinossauros e mortos-vivos para encontrar a origem da Maldi√ß√£o da Morte."
            },
            {
                title: "Lost Mine of Phandelver",
                level: "1-5",
                theme: "Fantasia Cl√°ssica",
                color: "from-blue-800 to-gray-800",
                desc: "A aventura introdut√≥ria perfeita. Explore a fronteira selvagem, lute contra goblins, descubra ru√≠nas an√£s perdidas e enfrente o misterioso Aranha Negra."
            },
            {
                title: "Storm King's Thunder",
                level: "1-10",
                theme: "Gigantes & √âpico",
                color: "from-cyan-900 to-blue-900",
                desc: "A Orning (ordem social) dos gigantes foi quebrada. Gigantes das colinas, do gelo, do fogo e das nuvens aterrorizam a Costa da Espada. Pequenos her√≥is devem deter amea√ßas colossais."
            },
            {
                title: "Descent into Avernus",
                level: "1-13",
                theme: "Inferno & Reden√ß√£o",
                color: "from-orange-900 to-red-900",
                desc: "Bem-vindo a Baldur's Gate, uma cidade de ambi√ß√£o e corrup√ß√£o. O destino levar√° os her√≥is para Avernus, a primeira camada dos Nove Infernos, para salvar uma cidade inteira."
            },
            {
                title: "Rime of the Frostmaiden",
                level: "1-12",
                theme: "Sobreviv√™ncia & Horror",
                color: "from-blue-400 to-slate-900",
                desc: "No Vale do Vento G√©lido, a escurid√£o reina. Auril, a Donzela G√©lida, lan√ßou um inverno eterno sobre a regi√£o. Sobreviva ao frio, bestas terr√≠veis e segredos enterrados no gelo."
            },
            {
                title: "Wild Beyond the Witchlight",
                level: "1-8",
                theme: "Fe√©rico & M√≠stico",
                color: "from-purple-600 to-pink-900",
                desc: "Uma aventura no Plano das Fadas. O circo Witchlight chegou √† cidade, trazendo mist√©rios e uma passagem para o dom√≠nio de Prismeer."
            },
            {
                title: "Spelljammer Academy",
                level: "1-5",
                theme: "Espa√ßo & Magia",
                color: "from-indigo-900 to-blue-600",
                desc: "Treine para se tornar um explorador do Mar Astral. Enfrente piratas githyanki e descubra os segredos das naves vivas que viajam entre os mundos."
            }
        ];

        const backgrounds = [
            {
                name: "Ac√≥lito",
                skill: "Intui√ß√£o, Religi√£o",
                desc: "Voc√™ passou sua vida a servi√ßo de um templo dedicado a um deus espec√≠fico ou pante√£o de deuses. Voc√™ age como um intermedi√°rio entre o reino do sagrado e o mundo mortal, realizando ritos sagrados e oferecendo sacrif√≠cios para guiar os fi√©is.",
                feature: "Abrigo dos Fi√©is: Voc√™ comanda o respeito daqueles que compartilham sua f√©, e pode realizar cerim√¥nias religiosas."
            },
            {
                name: "Criminoso",
                skill: "Furtividade, Engana√ß√£o",
                desc: "Voc√™ √© um criminoso experiente com um hist√≥rico de infringir a lei. Voc√™ gastou muito tempo entre outros criminosos e ainda tem contatos no submundo do crime. Voc√™ est√° muito mais perto do que a maioria das pessoas do lado escuro da vida.",
                feature: "Contato Criminal: Voc√™ tem um contato confi√°vel e seguro que age como seu intermedi√°rio para uma rede de outros criminosos."
            },
            {
                name: "Artista",
                skill: "Acrobacia, Performance",
                desc: "Voc√™ prospera na frente de uma audi√™ncia. Voc√™ sabe como encant√°-los, entret√™-los e at√© inspir√°-los. Sua arte pode ser m√∫sica, dan√ßa, atua√ß√£o ou qualquer outra forma de express√£o que mova a alma.",
                feature: "Por Demanda Popular: Voc√™ sempre pode encontrar um lugar para se apresentar. Recebe hospedagem e comida modesta de gra√ßa enquanto se apresentar."
            },
            {
                name: "Her√≥i do Povo",
                skill: "Adestrar Animais, Sobreviv√™ncia",
                desc: "Voc√™ vem de uma classe humilde, mas est√° destinado a muito mais. O povo de sua vila natal o considera seu campe√£o, e seu destino o chama para ficar contra os tiranos e monstros que amea√ßam as pessoas comuns.",
                feature: "Hospitalidade R√∫stica: Como voc√™ vem das fileiras do povo comum, voc√™ se encaixa entre eles com facilidade. Plebeus protegem voc√™ da lei."
            },
            {
                name: "Nobre",
                skill: "Hist√≥ria, Persuas√£o",
                desc: "Voc√™ entende de riqueza, poder e privil√©gio. Voc√™ carrega um t√≠tulo nobre, e sua fam√≠lia possui terras, cobra impostos e exerce influ√™ncia pol√≠tica significativa. Sua vida tem sido confort√°vel, cercada por servos e luxo.",
                feature: "Posi√ß√£o de Privil√©gio: Gra√ßas √† sua nobreza, as pessoas tendem a pensar o melhor de voc√™. Voc√™ √© bem-vindo na alta sociedade."
            },
            {
                name: "S√°bio",
                skill: "Arcanismo, Hist√≥ria",
                desc: "Voc√™ passou anos aprendendo a tradi√ß√£o do multiverso. Voc√™ vasculhou manuscritos, estudou pergaminhos e ouviu os maiores especialistas nos assuntos que lhe interessam. Seus esfor√ßos fizeram de voc√™ um mestre em seus campos de estudo.",
                feature: "Pesquisador: Quando voc√™ tenta aprender ou lembrar de uma informa√ß√£o, se voc√™ n√£o souber, voc√™ sabe onde encontrar quem sabe."
            },
            {
                name: "Soldado",
                skill: "Atletismo, Intimida√ß√£o",
                desc: "A guerra tem sido sua vida pelo tempo que voc√™ se lembra. Voc√™ treinou na juventude, estudou o uso de armas e armaduras, aprendeu t√©cnicas b√°sicas de sobreviv√™ncia, incluindo como permanecer vivo no campo de batalha.",
                feature: "Patente Militar: Voc√™ tem uma patente militar de sua carreira passada. Soldados leais √† sua antiga organiza√ß√£o militar ainda reconhecem sua autoridade."
            },
             {
                name: "Forasteiro",
                skill: "Atletismo, Sobreviv√™ncia",
                desc: "Voc√™ cresceu nas terras selvagens, longe da civiliza√ß√£o e do conforto da cidade e da tecnologia. Voc√™ testemunhou a migra√ß√£o de manadas maiores que florestas inteiras, sobreviveu a um clima mais extremo que qualquer habitante da cidade poderia compreender.",
                feature: "Viajante: Voc√™ tem uma excelente mem√≥ria para mapas e geografia, e voc√™ sempre pode encontrar comida e √°gua para si e at√© mais cinco pessoas."
            },
            {
                name: "Charlat√£o",
                skill: "Engana√ß√£o, Prestidigita√ß√£o",
                desc: "Voc√™ sempre teve um jeito com as pessoas. Voc√™ sabe o que as faz funcionar, voc√™ pode provocar seus desejos ou medos. Voc√™ tem um esquema favorito e uma identidade falsa bem estabelecida.",
                feature: "Identidade Falsa: Voc√™ criou uma segunda identidade que inclui documentos, conhecidos e disfarces."
            },
            {
                name: "Marinheiro",
                skill: "Atletismo, Percep√ß√£o",
                desc: "Voc√™ navegou em navios por anos. Voc√™ enfrentou tempestades terr√≠veis, monstros das profundezas e aqueles que querem afundar seu of√≠cio. O mar √© seu lar, e o conv√©s √© seu ch√£o.",
                feature: "Passagem de Navio: Voc√™ pode garantir passagem gratuita em um navio de mar para voc√™ e seus companheiros de aventura."
            }
        ];

        const races = [
            // --- OFICIAIS PHB ---
            { 
                name: "Humano", 
                stat: "+1 em Todos", 
                desc: "Os humanos s√£o os mais adapt√°veis e ambiciosos entre as ra√ßas comuns. Sua cultura e apar√™ncia variam enormemente.", 
                type: "Comum",
                traits: ["Versatilidade", "Aprendizado R√°pido"]
            },
            { 
                name: "Elfo", 
                stat: "+2 Destreza", 
                desc: "Seres m√°gicos de gra√ßa sobrenatural, vivendo em lugares de beleza et√©rea. Vivem s√©culos e amam a arte.", 
                type: "Fe√©rico",
                traits: ["Vis√£o no Escuro", "Sentidos Agu√ßados", "Transe"]
            },
            { 
                name: "An√£o", 
                stat: "+2 Constitui√ß√£o", 
                desc: "Guerreiros e ferreiros das montanhas. Valorizam a tradi√ß√£o, o cl√£ e a honra acima de tudo.", 
                type: "Montanha",
                traits: ["Resili√™ncia An√£", "Treinamento em Combate", "Trabalho em Pedra"]
            },
            { 
                name: "Halfling", 
                stat: "+2 Destreza", 
                desc: "Pequenos e pac√≠ficos, amam o conforto do lar, mas sua sorte inata muitas vezes os salva em aventuras.", 
                type: "Pequeno",
                traits: ["Sortudo", "Bravura", "Agilidade Halfling"]
            },
            { 
                name: "Draconato", 
                stat: "+2 For√ßa, +1 Carisma", 
                desc: "Humanoides com sangue de drag√£o. Orgulhosos e fortes, carregam o sopro de seus ancestrais.", 
                type: "Drac√¥nico",
                traits: ["Ataque de Sopro", "Resist√™ncia a Dano"]
            },
            { 
                name: "Gnomo", 
                stat: "+2 Intelig√™ncia", 
                desc: "Inventores e ilusionistas vibrantes que vivem em tocas. Curiosos e cheios de energia.", 
                type: "Pequeno",
                traits: ["Ast√∫cia Gn√¥mica", "Ilusionista Nato"]
            },
            { 
                name: "Meio-Elfo", 
                stat: "+2 Carisma, +1 em dois", 
                desc: "Diplomatas naturais que caminham entre dois mundos, combinando gra√ßa √©lfica e inova√ß√£o humana.", 
                type: "Mesti√ßo",
                traits: ["Ancestral Fe√©rico", "Versatilidade em Per√≠cia"]
            },
            { 
                name: "Meio-Orc", 
                stat: "+2 For√ßa, +1 Cons", 
                desc: "Guerreiros ferozes que transformam cicatrizes em orgulho. Possuem a f√∫ria implac√°vel dos orcs.", 
                type: "Mesti√ßo",
                traits: ["Ataque Selvagem", "Resist√™ncia Implac√°vel"]
            },
            { 
                name: "Tiefling", 
                stat: "+2 Carisma, +1 Int", 
                desc: "Herdeiros de um pacto infernal antigo. Chifres e caudas revelam sua heran√ßa, mas n√£o definem seu destino.", 
                type: "Planar",
                traits: ["Legado Infernal", "Resist√™ncia ao Fogo", "Vis√£o no Escuro"]
            },

            // --- VOLO'S & MORDENKAINEN & EBERRON ---
            { 
                name: "Aasimar", 
                stat: "+2 Carisma", 
                desc: "Humanos com uma centelha celestial. S√£o campe√µes do bem, vigiados por guias ang√©licos.", 
                type: "Planar",
                traits: ["M√£os Curativas", "Portador da Luz", "Resist√™ncia Celestial"]
            },
            { 
                name: "Aarakocra", 
                stat: "+2 Des, +1 Sab", 
                desc: "Povo-p√°ssaro nativo do Plano Elemental do Ar. Preferem espa√ßos abertos e voam com agilidade.", 
                type: "Humanoide",
                traits: ["Voo", "Garras", "Caminhar no Vento"]
            },
            { 
                name: "Bugbear", 
                stat: "+2 For√ßa, +1 Des", 
                desc: "Os primos peludos e brutais dos goblins. Nascidos para emboscadas e for√ßa bruta.", 
                type: "Goblin√≥ide",
                traits: ["Membros Longos", "Ataque Surpresa", "Complei√ß√£o Poderosa"]
            },
            { 
                name: "Centauro", 
                stat: "+2 For√ßa, +1 Sab", 
                desc: "N√¥mades da natureza, metade humano, metade cavalo. Velozes e fortes.", 
                type: "Monstruosidade",
                traits: ["Carga", "Cascos", "Sobreviv√™ncia"]
            },
            { 
                name: "Changeling", 
                stat: "+2 Carisma, +1 Outro", 
                desc: "Mestres do disfarce que alteram sua face √† vontade. Espi√µes e atores perfeitos.", 
                type: "Humanoide",
                traits: ["Mudan√ßa de Forma", "Instintos Sociais"]
            },
            { 
                name: "Firbolg", 
                stat: "+2 Sab, +1 For√ßa", 
                desc: "Gigantes gentis das florestas. Preferem a discri√ß√£o e usam magia para se esconder.", 
                type: "Gigante",
                traits: ["Magia Firbolg", "Fala com Bestas e Plantas"]
            },
            { 
                name: "Genasi", 
                stat: "+2 Constitui√ß√£o", 
                desc: "Herdeiros dos g√™nios elementais. Podem ser do Ar, Terra, Fogo ou √Ågua.", 
                type: "Planar",
                traits: ["Legado Elemental", "Resist√™ncia Elemental"]
            },
            { 
                name: "Githyanki", 
                stat: "+2 For√ßa, +1 Int", 
                desc: "Guerreiros ps√≠quicos do Plano Astral. Usam espadas de prata e servem sua rainha lich.", 
                type: "Planar",
                traits: ["Psi√¥nica Gith", "Salto", "M√£o de Mago"]
            },
            { 
                name: "Goblin", 
                stat: "+2 Des, +1 Cons", 
                desc: "Pequenos e maliciosos. Sobrevivem sendo r√°pidos, furtivos e cru√©is.", 
                type: "Goblin√≥ide",
                traits: ["Escapar Habilidoso", "F√∫ria do Pequeno"]
            },
            { 
                name: "Golias", 
                stat: "+2 For√ßa, +1 Cons", 
                desc: "Gigantes das montanhas. Vivem em tribos onde a for√ßa determina o valor.", 
                type: "Humanoide",
                traits: ["Resist√™ncia de Pedra", "Complei√ß√£o Poderosa"]
            },
            { 
                name: "Kenku", 
                stat: "+2 Des, +1 Sab", 
                desc: "Homens-corvo amaldi√ßoados sem voz pr√≥pria. Falam apenas atrav√©s de m√≠mica perfeita.", 
                type: "Humanoide",
                traits: ["Mimetismo", "Perito em Falsifica√ß√£o"]
            },
            { 
                name: "Kobold", 
                stat: "+2 Destreza", 
                desc: "Pequenos reptilianos servos de drag√µes. Fracos sozinhos, letais em bando.", 
                type: "Drac√¥nico",
                traits: ["T√°ticas de Bando", "Sensibilidade √† Luz"]
            },
            { 
                name: "Leonino", 
                stat: "+2 Cons, +1 For√ßa", 
                desc: "Guerreiros le√µes orgulhosos das plan√≠cies de Oreskos. Tem√≠veis em combate.", 
                type: "Humanoide",
                traits: ["Rugido Assustador", "Garras", "Velocidade"]
            },
            { 
                name: "Loxodonte", 
                stat: "+2 Cons, +1 Sab", 
                desc: "Humanoides elefante. S√°bios, leais e extremamente fortes.", 
                type: "Humanoide",
                traits: ["Tromba Pre√™nsil", "Serenidade", "Armadura Natural"]
            },
            { 
                name: "Minotauro", 
                stat: "+2 For√ßa, +1 Cons", 
                desc: "Humanoides com cabe√ßa de touro. Associados a labirintos e chifradas brutais.", 
                type: "Humanoide",
                traits: ["Chifres", "Martelar", "Imposi√ß√£o"]
            },
            { 
                name: "Orc", 
                stat: "+2 For√ßa, +1 Cons", 
                desc: "Vers√£o jog√°vel dos orcs. Guerreiros movidos por emo√ß√£o, n√£o necessariamente malignos.", 
                type: "Humanoide",
                traits: ["Adrenalina", "Complei√ß√£o Poderosa"]
            },
            { 
                name: "S√°tiro", 
                stat: "+2 Car, +1 Des", 
                desc: "Foli√µes da natureza com pernas de bode. Amam festas e m√∫sica.", 
                type: "Fe√©rico",
                traits: ["Resist√™ncia √† Magia", "Cabe√ßada", "Saltador"]
            },
            { 
                name: "Tabaxi", 
                stat: "+2 Des, +1 Car", 
                desc: "Povo-gato √°gil e curioso. Viajantes obcecados por segredos e hist√≥rias.", 
                type: "Humanoide",
                traits: ["Agilidade Felina", "Garras", "Escalada"]
            },
            { 
                name: "Tortle", 
                stat: "+2 For√ßa, +1 Sab", 
                desc: "Tartarugas humanoides n√¥mades. Carregam suas casas nas costas.", 
                type: "Humanoide",
                traits: ["Casco Duro", "Prender Respira√ß√£o", "Garras"]
            },
            { 
                name: "Trit√£o", 
                stat: "+1 For, +1 Con, +1 Car", 
                desc: "Guardi√µes nobres das profundezas oce√¢nicas. Combatem krakens e horrores.", 
                type: "Humanoide",
                traits: ["Anf√≠bio", "Controle do Ar e √Ågua"]
            },
            { 
                name: "Warforged", 
                stat: "+2 Cons, +1 Outro", 
                desc: "Seres de madeira e metal criados para a guerra, agora livres.", 
                type: "Constructo",
                traits: ["Prote√ß√£o Integrada", "N√£o Dorme", "Resili√™ncia"]
            },
            { 
                name: "Yuan-ti", 
                stat: "+2 Car, +1 Int", 
                desc: "Humanoides serpente frios e calculistas. Resistentes a veneno e magia.", 
                type: "Humanoide",
                traits: ["Resist√™ncia √† Magia", "Imunidade a Veneno"]
            },

            // --- SPELLJAMMER & FEYWILD ---
            { 
                name: "Fada", 
                stat: "+2 em um, +1 em outro", 
                desc: "Pequenas criaturas m√°gicas com asas. Mestres de ilus√£o e voo.", 
                type: "Fe√©rico",
                traits: ["Voo", "Magia das Fadas"]
            },
            { 
                name: "Harengon", 
                stat: "+1 em tudo ou flex", 
                desc: "Povo-coelho da Faeria. Energ√©ticos e capazes de saltos incr√≠veis.", 
                type: "Humanoide",
                traits: ["Pulo do Coelho", "Sentidos de Lebre", "Sorte"]
            },
            { 
                name: "Plasmoid", 
                stat: "+2 em um, +1 em outro", 
                desc: "Seres de lodo senci√™ncia. Podem mudar de forma e espremer-se em frestas.", 
                type: "Lodo",
                traits: ["Amorfo", "Pseud√≥pode", "Resist√™ncia √Åcida"]
            },
            { 
                name: "Thri-kreen", 
                stat: "+2 em um, +1 em outro", 
                desc: "Insetos humanoides com m√∫ltiplos bra√ßos e telepatia.", 
                type: "Monstruosidade",
                traits: ["Carapa√ßa", "Bra√ßos Secund√°rios", "Telepatia"]
            },

            // --- LINHAGENS G√ìTICAS (VRGtR) ---
            { 
                name: "Dhampir", 
                stat: "Flex√≠vel", 
                desc: "Meio-vampiros que sentem uma fome peculiar. Andam pelas paredes.", 
                type: "Linhagem",
                traits: ["Mordida Vamp√≠rica", "Andar na Aranha"]
            },
            { 
                name: "Hexblood", 
                stat: "Flex√≠vel", 
                desc: "Tocados pela magia de bruxas (Hags). Possuem coroas vivas e magia estranha.", 
                type: "Linhagem",
                traits: ["Magia Hex", "Token Misterioso"]
            },
            { 
                name: "Reborn", 
                stat: "Flex√≠vel", 
                desc: "Seres que morreram e retornaram, ou foram costurados. Mem√≥rias fragmentadas.", 
                type: "Linhagem",
                traits: ["Natureza Imortal", "Mem√≥rias de Vidas Passadas"]
            },

            // --- N√ÉO OFICIAIS / POPULARES ---
            { 
                name: "Mousefolk", 
                stat: "+2 Des, +1 Car", 
                desc: "Povo-rato pequeno e corajoso (Homebrew popular).", 
                type: "Homebrew",
                traits: ["Furtividade", "Agilidade"]
            },
            { 
                name: "Corujin (Owlin)", 
                stat: "Flex√≠vel", 
                desc: "Povo-coruja de Strixhaven. Planam silenciosamente na noite.", 
                type: "Strixhaven",
                traits: ["Voo Silencioso", "Vis√£o no Escuro"]
            },

            // --- RAVNICA & THEROS & DRAGONLANCE ---
            { 
                name: "Simic Hybrid", 
                stat: "+2 Cons, +1 Outro", 
                desc: "Guardi√µes da natureza modificados magicamente com partes de animais.", 
                type: "H√≠brido",
                traits: ["Adapta√ß√£o Animal", "Vis√£o no Escuro"]
            },
            { 
                name: "Vedalken", 
                stat: "+2 Int, +1 Sab", 
                desc: "Seres de pele azul, l√≥gicos e perfeccionistas. Resistentes √† magia mental.", 
                type: "Humanoide",
                traits: ["Desapaixonado", "Precis√£o Incans√°vel"]
            },
            { 
                name: "Kender", 
                stat: "Flex√≠vel", 
                desc: "Pequenos aventureiros destemidos de Krynn. Curiosidade sobrenatural.", 
                type: "Pequeno",
                traits: ["Destemido", "Provoca√ß√£o"]
            },

            // --- MAIS SPELLJAMMER & ASTRAL ---
            { 
                name: "Elfo Astral", 
                stat: "Flex√≠vel", 
                desc: "Elfos que migraram para o Mar Astral. Vivem milhares de anos.", 
                type: "Astral",
                traits: ["Passo Estelar", "Transe Astral"]
            },
            { 
                name: "Autognomo", 
                stat: "Flex√≠vel", 
                desc: "Gnomos mec√¢nicos constru√≠dos para sobreviver no espa√ßo.", 
                type: "Constructo",
                traits: ["Blindagem", "Constru√≠do para o Sucesso"]
            },
            { 
                name: "Giff", 
                stat: "+2 For√ßa", 
                desc: "Povo-hipop√≥tamo espacial. Amam explosivos e armas de fogo.", 
                type: "Humanoide",
                traits: ["Mestre de Armas de Fogo", "Corpo Astral"]
            },
            { 
                name: "Hadozee", 
                stat: "Flex√≠vel", 
                desc: "S√≠mios alados que planam entre os conveses dos navios astrais.", 
                type: "Humanoide",
                traits: ["Planar", "Agilidade de Conv√©s"]
            },

            // --- EBERRON & UNDERDARK EXPANDIDO ---
            { 
                name: "Shifter (Metamorfo)", 
                stat: "+1 Des, +2 Outro", 
                desc: "Humanos com um toque bestial. Podem assumir aspectos animais tempor√°rios.", 
                type: "Humanoide",
                traits: ["Transforma√ß√£o", "Instintos Selvagens"]
            },
            { 
                name: "Kalashtar", 
                stat: "+2 Sab, +1 Car", 
                desc: "Hospedeiros de esp√≠ritos dos sonhos quori. Telepatas naturais.", 
                type: "Humanoide",
                traits: ["Mente Dupla", "Link Mental"]
            },
            { 
                name: "Duergar", 
                stat: "+2 Cons, +1 For", 
                desc: "An√µes cinzentos do Underdark. Mestres da psi√¥nica e invisibilidade.", 
                type: "An√£o",
                traits: ["Magia Duergar", "Resili√™ncia Ps√≠quica"]
            },
            { 
                name: "Gnomo das Profundezas", 
                stat: "+2 Int, +1 Des", 
                desc: "Svirfneblin vivem no Underdark. Mestres da camuflagem e gemas.", 
                type: "Gnomo",
                traits: ["Camuflagem de Pedra", "Gnomo Astuto"]
            },

            // --- ELFOS VARIANTES (MORDENKAINEN) ---
            { 
                name: "Eladrin", 
                stat: "+2 Des, +1 Car", 
                desc: "Elfos nativos da Faeria. Mudam de esta√ß√£o (Primavera, Ver√£o, etc.) e temperamento.", 
                type: "Fe√©rico",
                traits: ["Passo Fe√©rico", "Mudan√ßa de Esta√ß√£o"]
            },
            { 
                name: "Shadar-kai", 
                stat: "+2 Des, +1 Cons", 
                desc: "Elfos do Shadowfell que servem a Rainha de Rapina. Sombrios e resistentes.", 
                type: "Elfo",
                traits: ["Teleporte das Sombras", "Resist√™ncia Necr√≥tica"]
            },
            { 
                name: "Elfo do Mar", 
                stat: "+2 Des, +1 Cons", 
                desc: "Elfos adaptados √† vida subaqu√°tica. Amigos dos golfinhos.", 
                type: "Elfo",
                traits: ["Anf√≠bio", "Filho do Mar"]
            },

            // --- EX√ìTICOS & MONSTRUOSOS ---
            { 
                name: "Hobgoblin", 
                stat: "+2 Con, +1 Int", 
                desc: "Goblin√≥ides marciais e disciplinados. Honra e gl√≥ria s√£o tudo.", 
                type: "Goblin√≥ide",
                traits: ["Treinamento Marcial", "Salvar a Face"]
            },
            { 
                name: "Lizardfolk", 
                stat: "+2 Cons, +1 Sab", 
                desc: "Povo-lagarto pragm√°tico. Sobreviv√™ncia √© a √∫nica emo√ß√£o real.", 
                type: "Humanoide",
                traits: ["Mordida", "Armadura Natural", "Artes√£o Astuto"]
            },
            { 
                name: "Grung", 
                stat: "+2 Des, +1 Cons", 
                desc: "Pequenos sapos humanoides coloridos. Segregam veneno pela pele.", 
                type: "Humanoide",
                traits: ["Pele Venenosa", "Salto em P√©", "Depend√™ncia de √Ågua"]
            },
            { 
                name: "Locathah", 
                stat: "+2 For, +1 Des", 
                desc: "Povo-peixe resiliente e amig√°vel. Vivem em harmonia com o mar.", 
                type: "Humanoide",
                traits: ["Escamas Leviat√£", "Observador Astuto"]
            },
            { 
                name: "Verdan", 
                stat: "+2 Car, +1 Con", 
                desc: "Goblins mutantes criados por caos e entropia. Mudam de tamanho.", 
                type: "Goblin√≥ide",
                traits: ["Sangue Negro", "Empatia Telep√°tica"]
            }
        ];

        const classes = {
            "B√°rbaro": {
                desc: "Guerreiros primordiais que rejeitam a disciplina militar em favor de uma f√∫ria selvagem.",
                hd: "d12",
                primary: "For√ßa",
                subs: [
                    { name: "Caminho do Berserker", desc: "Para alguns b√°rbaros, a f√∫ria √© um meio para um fim. O Berserker n√£o liga para sua pr√≥pria seguran√ßa, entrando em um frenesi de sangue que aterroriza os inimigos." },
                    { name: "Caminho do Totem", desc: "O Caminho do Totem Guerreiro √© uma jornada espiritual. O b√°rbaro aceita um esp√≠rito animal como guia, protetor e inspira√ß√£o, ganhando poderes sobrenaturais." },
                    { name: "Guardi√£o Ancestral", desc: "Esses b√°rbaros cultivam la√ßos com esp√≠ritos de seus ancestrais, que lutam ao seu lado, protegendo seus aliados e punindo aqueles que ousam atac√°-los." }
                ],
                icon: "ü™ì"
            },
            "Bardo": {
                desc: "Mestres da can√ß√£o e do discurso, tecendo magia atrav√©s de suas performances.",
                hd: "d8",
                primary: "Carisma",
                subs: [
                    { name: "Col√©gio do Conhecimento", desc: "Bardos deste col√©gio sabem algo sobre quase tudo. Eles buscam coletar conhecimento de fontes raras e usam palavras para confundir inimigos ou inspirar aliados." },
                    { name: "Col√©gio da Bravura", desc: "Bardos ousados que contam hist√≥rias de her√≥is do passado para inspirar uma nova gera√ß√£o, muitas vezes lutando na linha de frente ao lado dos guerreiros." },
                    { name: "Col√©gio dos Sussurros", desc: "Lobos em pele de cordeiro, esses bardos usam seu conhecimento para descobrir segredos, chantagear e destruir reputa√ß√µes com uma palavra venenosa." }
                ],
                icon: "lute"
            },
            "Bruxo": {
                desc: "Portadores de magia sombria derivada de pactos com entidades extraplanares.",
                hd: "d8",
                primary: "Carisma",
                subs: [
                    { name: "O Arquifada", desc: "Seu patrono √© um lorde ou senhora das fadas, uma criatura de lendas cujos objetivos s√£o inescrut√°veis. Eles concedem magias de ilus√£o e encantamento." },
                    { name: "O Corruptor (Infernal)", desc: "Voc√™ fez um pacto com um diabo dos Nove Infernos. Seu pacto lhe d√° poder sobre o fogo e a habilidade de manipular a sorte, mas a que custo para sua alma?" },
                    { name: "O Grande Antigo", desc: "Seu patrono √© uma entidade misteriosa de um reino distante do espa√ßo e tempo. Seus segredos perturbam a mente e concedem telepatia e loucura." }
                ],
                icon: "üëÅÔ∏è"
            },
            "Cl√©rigo": {
                desc: "Guerreiros divinos e curandeiros que servem como intermedi√°rios dos deuses.",
                hd: "d8",
                primary: "Sabedoria",
                subs: [
                    { name: "Dom√≠nio da Vida", desc: "O foco deste dom√≠nio √© preservar a vida. Cl√©rigos da Vida s√£o os curandeiros supremos, capazes de restaurar a vitalidade at√© dos ferimentos mais graves." },
                    { name: "Dom√≠nio da Guerra", desc: "A guerra tem seus pr√≥prios deuses. Esses cl√©rigos s√£o campe√µes de batalha, aben√ßoando armas e inspirando f√∫ria sagrada em seus aliados." },
                    { name: "Dom√≠nio da Luz", desc: "Promovendo ideais de renascimento e verdade, estes cl√©rigos manipulam a luz divina para queimar os inimigos e banir a escurid√£o." }
                ],
                icon: "‚ú®"
            },
            "Druida": {
                desc: "Guardi√µes da natureza que assumem formas animais e controlam os elementos.",
                hd: "d8",
                primary: "Sabedoria",
                subs: [
                    { name: "C√≠rculo da Terra", desc: "Druidas deste c√≠rculo s√£o m√≠sticos e s√°bios que guardam conhecimentos antigos e ritos sagrados. Sua magia √© influenciada pelo terreno onde foram iniciados." },
                    { name: "C√≠rculo da Lua", desc: "Guardi√µes ferozes das selvas, esses druidas se especializam na forma selvagem, transformando-se em bestas de combate poderosas como ursos e lobos gigantes." },
                    { name: "C√≠rculo do Pastor", desc: "Druidas que focam na prote√ß√£o das bestas e esp√≠ritos fe√©ricos. Eles invocam esp√≠ritos da natureza para proteger e fortalecer seus aliados." }
                ],
                icon: "üåø"
            },
            "Feiticeiro": {
                desc: "Conjuradores que moldam magia atrav√©s de talento inato ou linhagem sangu√≠nea.",
                hd: "d6",
                primary: "Carisma",
                subs: [
                    { name: "Linhagem Drac√¥nica", desc: "A magia de drag√µes antigos flui em suas veias. Voc√™ ganha escamas naturais, resist√™ncia elemental e a afinidade com o tipo de drag√£o do seu ancestral." },
                    { name: "Magia Selvagem", desc: "Sua magia vem das for√ßas do caos. Ela pode surgir com efeitos imprevis√≠veis, √†s vezes desastrosos, √†s vezes milagrosos, mas sempre espetaculares." },
                    { name: "Alma da Tempestade", desc: "Voc√™ tem uma alma sintonizada com o poder elemental do ar. Voc√™ controla ventos, rel√¢mpagos e trov√µes com a facilidade de quem respira." }
                ],
                icon: "üî•"
            },
            "Guerreiro": {
                desc: "Mestres de armas e armaduras, vers√°teis e letais no campo de batalha.",
                hd: "d10",
                primary: "For√ßa ou Destreza",
                subs: [
                    { name: "Campe√£o", desc: "O arqu√©tipo cl√°ssico. Voc√™ foca no desenvolvimento da for√ßa f√≠sica bruta e na perfei√ß√£o mortal, aumentando drasticamente sua chance de acertos cr√≠ticos." },
                    { name: "Mestre de Batalha", desc: "Para voc√™, o combate √© uma ci√™ncia acad√™mica. Voc√™ usa manobras e dados de superioridade para controlar o campo de batalha e comandar aliados." },
                    { name: "Cavaleiro Arcano", desc: "Voc√™ combina a maestria marcial com o estudo da magia. Voc√™ usa feiti√ßos de abjura√ß√£o e evoca√ß√£o para aumentar sua defesa e ataque." }
                ],
                icon: "‚öîÔ∏è"
            },
            "Ladino": {
                desc: "Especialistas em furtividade, precis√£o e em explorar as fraquezas inimigas.",
                hd: "d8",
                primary: "Destreza",
                subs: [
                    { name: "Ladr√£o", desc: "Especialista em latroc√≠nio, furtividade e invas√£o. Voc√™ tem m√£os r√°pidas, escala paredes como uma aranha e usa objetos m√°gicos com facilidade." },
                    { name: "Assassino", desc: "Voc√™ foca na arte da morte. Mestre dos disfarces e venenos, seus ataques s√£o devastadores quando voc√™ pega o inimigo de surpresa." },
                    { name: "Trapaceiro Arcano", desc: "Alguns ladinos aprendem magia para melhorar suas habilidades. Voc√™ usa ilus√µes e encantamentos para distrair v√≠timas e ocultar seus rastros." }
                ],
                icon: "üó°Ô∏è"
            },
            "Mago": {
                desc: "Eruditos arcanos capazes de dobrar a realidade atrav√©s de estudo intenso.",
                hd: "d6",
                primary: "Intelig√™ncia",
                subs: [
                    { name: "Escola de Evoca√ß√£o", desc: "Focada em criar efeitos elementais poderosos como frio, fogo e rel√¢mpago. Voc√™ aprende a moldar suas magias para n√£o ferir seus aliados." },
                    { name: "Escola de Necromancia", desc: "Explora as for√ßas da vida e da morte. Voc√™ pode drenar a vida de inimigos e, eventualmente, erguer os mortos para lutar sob seu comando." },
                    { name: "Escola de Adivinha√ß√£o", desc: "Busca entender o passado, presente e futuro. Voc√™ pode vislumbrar o destino e alterar rolagens de dados antes que elas aconte√ßam." }
                ],
                icon: "üîÆ"
            },
            "Monge": {
                desc: "Mestres das artes marciais que canalizam a energia m√≠stica do Ki.",
                hd: "d8",
                primary: "Destreza e Sabedoria",
                subs: [
                    { name: "Caminho da M√£o Aberta", desc: "O estilo cl√°ssico de artes marciais. Voc√™ manipula o ki inimigo para derrub√°-los, empurr√°-los ou impedi-los de reagir." },
                    { name: "Caminho das Sombras", desc: "Ninjas e espi√µes. Voc√™ usa seu ki para se tornar invis√≠vel, teletransportar entre sombras e silenciar seus passos." },
                    { name: "Quatro Elementos", desc: "Voc√™ aprende a canalizar seu ki para lan√ßar feiti√ßos elementais, dobrando fogo, √°gua, terra e ar como extens√µes do seu corpo." }
                ],
                icon: "ü•ã"
            },
            "Paladino": {
                desc: "Guerreiros sagrados jurados a cumprir votos de justi√ßa e retid√£o.",
                hd: "d10",
                primary: "For√ßa e Carisma",
                subs: [
                    { name: "Juramento de Devo√ß√£o", desc: "O cavaleiro de armadura brilhante ideal. Voc√™ luta pela justi√ßa, verdade e honra, com poderes focados em proteger os fracos e destruir mortos-vivos." },
                    { name: "Juramento de Vingan√ßa", desc: "Voc√™ sacrificou sua pr√≥pria pureza para punir os √≠mpios. Seu foco √© puramente ofensivo, ca√ßando e destruindo seus inimigos jurados." },
                    { name: "Juramento dos Anci√µes", desc: "Um cavaleiro fe√©rico que protege a beleza e a luz. Seus poderes s√£o ligados √† natureza, resistindo √† magia e prendendo inimigos com vinhas." }
                ],
                icon: "üõ°Ô∏è"
            },
            "Patrulheiro": {
                desc: "Ca√ßadores implac√°veis que protegem as fronteiras da civiliza√ß√£o.",
                hd: "d10",
                primary: "Destreza e Sabedoria",
                subs: [
                    { name: "Ca√ßador", desc: "O mestre do combate marcial contra amea√ßas espec√≠ficas. Voc√™ aprende t√©cnicas para lidar com hordas de inimigos ou abater gigantes solit√°rios." },
                    { name: "Mestre das Bestas", desc: "Voc√™ forma um v√≠nculo m√≠stico com uma fera da natureza. Seu companheiro animal luta ao seu lado com intelig√™ncia e coordena√ß√£o sobrenaturais." },
                    { name: "Andarilho do Horizonte", desc: "Guardi√µes que protegem o mundo contra amea√ßas de outros planos. Voc√™ pode detectar portais e se teletransportar em combate." }
                ],
                icon: "üèπ"
            }
        };

        const hooks = [
            "Um cometa roxo caiu nas montanhas e os mortos come√ßaram a se levantar nas vilas pr√≥ximas.",
            "O taverneiro √© na verdade um drag√£o dourado disfar√ßado que perdeu sua mem√≥ria.",
            "Uma guilda de ladr√µes roubou a sombra do Rei, e ele est√° morrendo sem ela.",
            "A floresta sussurra nomes daqueles que v√£o morrer na pr√≥xima lua cheia.",
            "Um espelho na mans√£o local mostra o reflexo de quem voc√™ era na vida passada.",
            "Os ratos da cidade come√ßaram a falar e exigem direitos iguais.",
            "Uma ilha flutuante apareceu sobre a capital, chovendo cinzas douradas."
        ];

        // Functions
        function showSection(id) {
            document.querySelectorAll('main > section').forEach(el => el.classList.add('hidden'));
            const target = document.getElementById(id);
            target.classList.remove('hidden');
            target.classList.add('animate-fade-in');
            window.scrollTo(0, 0);
            
            // Auto-load bestiary default if opening that tab
            if (id === 'bestiary') {
                filterBestiary('boss');
            }
        }

        // --- BESTIARY LOGIC ---
        function filterBestiary(category) {
            // Update Buttons
            document.getElementById('btn-boss').className = `px-6 py-2 rounded-full border border-gray-700 hover:text-white hover:border-accent-red transition bg-black/30 font-heading ${category === 'boss' ? 'tab-active text-white border-accent-red' : 'text-gray-400'}`;
            document.getElementById('btn-monsters').className = `px-6 py-2 rounded-full border border-gray-700 hover:text-white hover:border-purple-500 transition bg-black/30 font-heading ${category === 'monsters' ? 'tab-active text-white border-purple-500' : 'text-gray-400'}`;
            document.getElementById('btn-creatures').className = `px-6 py-2 rounded-full border border-gray-700 hover:text-white hover:border-green-500 transition bg-black/30 font-heading ${category === 'creatures' ? 'tab-active text-white border-green-500' : 'text-gray-400'}`;

            // Hide all grids
            document.getElementById('grid-boss').classList.add('hidden');
            document.getElementById('grid-monsters').classList.add('hidden');
            document.getElementById('grid-creatures').classList.add('hidden');

            // Show selected grid and populate if empty
            const targetGrid = document.getElementById(`grid-${category}`);
            targetGrid.classList.remove('hidden');
            
            // Populate logic
            if (targetGrid.innerHTML.trim() === '' || targetGrid.innerHTML.includes('<!-- JS Populated -->')) {
                let html = '';
                const data = bestiary[category];
                
                // Color mapping
                let borderColor = 'border-gray-700';
                let icon = '‚ùì';
                
                if(category === 'boss') { borderColor = 'border-red-900/50 hover:border-red-500'; icon = 'üíÄ'; }
                else if(category === 'monsters') { borderColor = 'border-purple-900/50 hover:border-purple-500'; icon = 'üëÅÔ∏è'; }
                else { borderColor = 'border-green-900/50 hover:border-green-500'; icon = 'üêæ'; }

                data.forEach(item => {
                    html += `
                    <div class="glass p-6 rounded-xl border ${borderColor} transition duration-300 group flex flex-col hover:shadow-lg hover:bg-white/5">
                        <div class="flex justify-between items-start mb-2">
                             <h3 class="font-heading text-xl font-bold text-white group-hover:text-soul-300 transition flex items-center gap-2">
                                <span>${icon}</span> ${item.name}
                             </h3>
                             <span class="text-xs font-mono px-2 py-1 rounded bg-black/40 text-gray-400 border border-white/10">${item.cr}</span>
                        </div>
                        <div class="mb-3">
                            <span class="text-xs uppercase tracking-widest text-soul-400 font-bold">${item.title}</span>
                            <span class="text-xs text-gray-500 ml-2">‚Ä¢ ${item.type}</span>
                        </div>
                        <p class="text-gray-400 text-sm mb-4 leading-relaxed border-t border-white/5 pt-3">${item.desc}</p>
                    </div>
                    `;
                });
                targetGrid.innerHTML = html;
            }
        }

        function initData() {
            // Backgrounds
            const bGrid = document.getElementById('backgrounds-grid');
            backgrounds.forEach(bg => {
                bGrid.innerHTML += `
                    <div class="glass p-6 rounded-xl border-l-2 border-transparent hover:border-soul-500 transition duration-300 group flex flex-col">
                        <div class="flex justify-between items-start mb-2">
                             <h3 class="font-heading text-xl font-bold text-white group-hover:text-soul-300 transition">${bg.name}</h3>
                             <span class="text-xs text-accent-cyan font-mono border border-accent-cyan/20 bg-accent-cyan/5 px-2 py-1 rounded">Per√≠cias: ${bg.skill}</span>
                        </div>
                        <p class="text-gray-400 text-sm mb-4 leading-relaxed">${bg.desc}</p>
                        <div class="mt-auto pt-4 border-t border-white/5 bg-black/20 -mx-6 -mb-6 p-4 rounded-b-xl">
                            <span class="text-soul-300 font-bold text-xs uppercase tracking-wide block mb-1">Caracter√≠stica:</span>
                            <p class="text-gray-300 text-sm italic">${bg.feature}</p>
                        </div>
                    </div>
                `;
            });

            // Races
            const rGrid = document.getElementById('races-grid');
            races.forEach(r => {
                const traitsHtml = r.traits ? 
                    `<div class="flex flex-wrap gap-2 mb-3">${r.traits.map(t => `<span class="text-[10px] uppercase px-2 py-1 bg-white/10 rounded text-soul-300 border border-soul-500/30">${t}</span>`).join('')}</div>` 
                    : '';

                rGrid.innerHTML += `
                    <div class="glass p-6 rounded-xl border-l-2 border-transparent hover:border-soul-500 transition duration-300 group flex flex-col h-full">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-heading text-xl font-bold text-white group-hover:text-soul-300 transition">${r.name}</h3>
                            <span class="text-xs px-2 py-1 bg-white/5 rounded text-gray-400 border border-white/5">${r.type}</span>
                        </div>
                        ${traitsHtml}
                        <p class="text-gray-400 text-sm mb-4 leading-relaxed flex-grow text-justify">${r.desc}</p>
                        <div class="mt-auto pt-4 border-t border-white/5">
                            <div class="text-accent-cyan text-xs font-mono uppercase tracking-wider font-bold">Bonus: ${r.stat}</div>
                        </div>
                    </div>
                `;
            });
            
            // Adventures (UPDATED with onclick)
            const aGrid = document.getElementById('adventures-grid');
            adventures.forEach((adv, index) => {
                aGrid.innerHTML += `
                    <div class="glass rounded-2xl overflow-hidden group cursor-pointer hover:shadow-[0_0_30px_rgba(99,102,241,0.3)] transition duration-500">
                        <div class="h-32 bg-gradient-to-br ${adv.color} relative p-6 flex items-end">
                            <div class="absolute top-0 right-0 p-4 opacity-20 text-6xl group-hover:scale-110 transition duration-500">üêâ</div>
                            <h3 class="font-heading text-2xl font-bold text-white relative z-10 shadow-black drop-shadow-lg">${adv.title}</h3>
                        </div>
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-4">
                                <span class="text-xs font-bold px-2 py-1 bg-white/10 rounded text-soul-300 border border-soul-500/30">N√≠vel ${adv.level}</span>
                                <span class="text-xs text-gray-500 uppercase tracking-widest">${adv.theme}</span>
                            </div>
                            <p class="text-gray-400 text-sm leading-relaxed mb-4">${adv.desc}</p>
                            <button onclick="openAdventure(${index})" class="w-full py-2 rounded bg-white/5 hover:bg-soul-600 text-soul-300 hover:text-white transition text-xs font-bold uppercase tracking-wider border border-white/5 hover:border-soul-400">Ver Detalhes</button>
                        </div>
                    </div>
                `;
            });

            // Classes Sidebar
            const cList = document.getElementById('class-list');
            const sortedClasses = Object.keys(classes).sort();
            
            sortedClasses.forEach(c => {
                const btn = document.createElement('button');
                const icon = classes[c].icon.length > 2 ? 'üõ°Ô∏è' : classes[c].icon;
                btn.className = "w-full text-left px-5 py-4 rounded-lg bg-white/5 hover:bg-soul-500 hover:text-white text-gray-400 transition duration-300 flex justify-between items-center group mb-2 border border-transparent hover:border-accent-cyan/30";
                btn.innerHTML = `<div class="flex items-center gap-3"><span class="text-xl opacity-70">${icon}</span> <span class="font-heading font-semibold">${c}</span></div> <span class="opacity-0 group-hover:opacity-100 transition text-accent-cyan">‚Üí</span>`;
                btn.onclick = () => loadClass(c);
                cList.appendChild(btn);
            });
        }

        function loadClass(name) {
            const data = classes[name];
            const view = document.getElementById('class-detail');
            const icon = data.icon.length > 2 ? 'üõ°Ô∏è' : data.icon;

            view.innerHTML = `
                <div class="animate-fade-in relative z-10 h-full flex flex-col">
                    <div class="flex items-start md:items-center gap-6 mb-8 border-b border-white/10 pb-6">
                        <div class="text-5xl bg-gradient-to-br from-soul-800 to-black w-24 h-24 rounded-2xl flex items-center justify-center shadow-lg border border-soul-500/30 text-glow">${icon}</div>
                        <div>
                            <h3 class="font-heading text-5xl text-white font-bold tracking-tight mb-2">${name}</h3>
                            <div class="flex flex-wrap gap-3">
                                <span class="px-3 py-1 bg-soul-500/20 text-soul-300 text-xs font-mono rounded border border-soul-500/30">DV: ${data.hd}</span>
                                <span class="px-3 py-1 bg-accent-cyan/10 text-accent-cyan text-xs font-mono rounded border border-accent-cyan/30">Atributo: ${data.primary}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="prose prose-invert max-w-none mb-8">
                        <p class="text-lg text-gray-300 font-light leading-relaxed border-l-4 border-soul-500 pl-6 italic">
                            "${data.desc}"
                        </p>
                    </div>

                    <div class="mt-auto">
                        <h4 class="text-white font-heading text-xl mb-6 flex items-center gap-3">
                            <span class="w-2 h-8 bg-accent-cyan rounded-full shadow-[0_0_10px_#22d3ee]"></span> Arqu√©tipos Sagrados
                        </h4>
                        <div class="grid grid-cols-1 gap-4">
                            ${data.subs.map(s => `
                                <div class="p-5 bg-black/40 border border-white/5 rounded-xl text-gray-300 hover:border-soul-500 hover:bg-soul-900/30 transition group">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="text-soul-500 group-hover:text-accent-cyan transition text-lg">‚ú¶</span> 
                                        <h5 class="font-bold text-white text-lg">${s.name}</h5>
                                    </div>
                                    <p class="text-sm text-gray-400 pl-6 leading-relaxed">${s.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // --- ADVENTURE MODAL LOGIC (NEW) ---
        function openAdventure(index) {
            const adv = adventures[index];
            if (!adv) return;

            document.getElementById('modal-title').textContent = adv.title;
            document.getElementById('modal-level').textContent = "N√≠vel " + adv.level;
            document.getElementById('modal-theme').textContent = adv.theme;
            document.getElementById('modal-desc').textContent = adv.desc;
            
            // Show Modal
            const modal = document.getElementById('adventure-modal');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.add('open');
            }, 10);
        }

        function closeAdventure() {
            const modal = document.getElementById('adventure-modal');
            modal.classList.remove('open');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function generateHook() {
            const h = hooks[Math.floor(Math.random() * hooks.length)];
            const el = document.getElementById('hook-display');
            el.innerHTML = `<span class="animate-pulse text-soul-300">${h}</span>`;
            setTimeout(() => el.innerHTML = h, 500);
        }

        function generateNPC() {
            const names = ["Valeros", "Nyx", "Caelum", "Seraph", "Vesper", "Draven", "Lilith", "Orion"];
            const traits = ["Paranoico", "S√°bio", "Ganancioso", "Leal", "Covarde", "M√≠stico", "B√™bado"];
            
            const n = names[Math.floor(Math.random() * names.length)];
            const r = races[Math.floor(Math.random() * races.length)].name;
            const t = traits[Math.floor(Math.random() * traits.length)];

            document.getElementById('npc-display').innerHTML = `
                <div class="flex justify-between border-b border-gray-800 pb-2 animate-fade-in items-center">
                     <span class="text-gray-500 text-xs uppercase tracking-wide">Nome</span>
                     <span class="text-accent-cyan font-bold font-heading text-sm">${n}</span>
                 </div>
                 <div class="flex justify-between border-b border-gray-800 pb-2 animate-fade-in items-center">
                     <span class="text-gray-500 text-xs uppercase tracking-wide">Ra√ßa</span>
                     <span class="text-white text-sm">${r}</span>
                 </div>
                 <div class="flex justify-between animate-fade-in items-center">
                     <span class="text-gray-500 text-xs uppercase tracking-wide">Alma</span>
                     <span class="text-soul-300 italic text-sm">${t}</span>
                 </div>
            `;
        }

        function rollDice(sides) {
            const el = document.getElementById('dice-result');
            const log = document.getElementById('history-log');
            
            let counter = 0;
            const interval = setInterval(() => {
                el.innerText = Math.floor(Math.random() * sides) + 1;
                counter++;
                if(counter > 10) {
                    clearInterval(interval);
                    const final = Math.floor(Math.random() * sides) + 1;
                    
                    // Crit colors
                    if(sides === 20 && final === 20) el.className = "relative z-10 text-8xl font-heading font-bold text-accent-cyan drop-shadow-[0_0_35px_rgba(34,211,238,1)] scale-125 transition-all duration-300";
                    else if(sides === 20 && final === 1) el.className = "relative z-10 text-8xl font-heading font-bold text-red-600 drop-shadow-[0_0_35px_rgba(220,38,38,1)] scale-90 transition-all duration-300";
                    else el.className = "relative z-10 text-8xl font-heading font-bold text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]";

                    el.innerText = final;
                    log.innerHTML = `<span class="text-soul-400 uppercase tracking-widest text-xs">Destino:</span> D${sides} = <strong class="text-white">${final}</strong>`;
                }
            }, 50);
        }

        // --- CHAT LOGIC (REAL AI) ---
        function handleChatKey(e) {
            if (e.key === 'Enter') sendMessage();
        }

        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const msg = input.value.trim();
            if (!msg) return;

            addMessageToChat('user', msg);
            input.value = '';

            const chatContainer = document.getElementById('chat-messages');
            
            // Show typing indicator
            const typingId = 'typing-' + Date.now();
            chatContainer.innerHTML += `
                <div id="${typingId}" class="flex items-start gap-3 animate-pulse">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-emerald-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-lg">AI</div>
                    <div class="bg-soul-800/80 p-3 rounded-2xl rounded-tl-none border border-white/5 text-sm text-gray-400 italic">
                        O Or√°culo est√° consultando os planos...
                    </div>
                </div>
            `;
            chatContainer.scrollTop = chatContainer.scrollHeight;

            try {
                // Using gemini-2.5-flash for speed
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Voc√™ √© o Or√°culo, um assistente s√°bio, criativo e imersivo para Mestres de RPG de Dungeons & Dragons 5¬™ Edi√ß√£o. 
                                Ajude com regras, cria√ß√£o de hist√≥rias, NPCs, monstros e ideias de campanha.
                                Responda sempre em Portugu√™s do Brasil. Seja conciso mas criativo.
                                
                                Usu√°rio: ${msg}`
                            }]
                        }]
                    })
                });

                if (!response.ok) throw new Error('Falha na conex√£o com a API');

                const data = await response.json();
                
                // Remove typing indicator
                const typingEl = document.getElementById(typingId);
                if(typingEl) typingEl.remove();

                if (data.candidates && data.candidates[0].content) {
                    let reply = data.candidates[0].content.parts[0].text;
                    
                    // Simple formatting: Bold and Line Breaks
                    reply = reply.replace(/\*\*(.*?)\*\*/g, '<strong class="text-accent-cyan">$1</strong>');
                    reply = reply.replace(/\n/g, '<br>');
                    
                    addMessageToChat('ai', reply);
                } else {
                    addMessageToChat('ai', "O Or√°culo est√° confuso. (Erro: Resposta vazia da API). Verifique sua chave.");
                }

            } catch (error) {
                const typingEl = document.getElementById(typingId);
                if(typingEl) typingEl.remove();
                addMessageToChat('ai', "A conex√£o com os planos falhou. (Erro de Rede ou API Key inv√°lida)");
                console.error(error);
            }
        }

        function addMessageToChat(sender, text) {
            const chatContainer = document.getElementById('chat-messages');
            let html = '';

            if (sender === 'user') {
                html = `
                    <div class="flex items-start gap-3 justify-end">
                        <div class="bg-soul-500 p-3 rounded-2xl rounded-tr-none text-sm text-white shadow-lg shadow-soul-500/10 max-w-[80%]">
                            ${text}
                        </div>
                        <div class="w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center text-xs text-white border border-gray-600">You</div>
                    </div>
                `;
            } else {
                html = `
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-emerald-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-lg">AI</div>
                        <div class="bg-soul-800/80 p-3 rounded-2xl rounded-tl-none border border-white/5 text-sm text-gray-200 shadow-md max-w-[80%]">
                            ${text}
                        </div>
                    </div>
                `;
            }
            
            chatContainer.innerHTML += html;
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function clearChat() {
            document.getElementById('chat-messages').innerHTML = `
                <div class="flex items-start gap-3">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-emerald-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-lg">AI</div>
                    <div class="bg-soul-800/80 p-3 rounded-2xl rounded-tl-none border border-white/5 text-sm text-gray-200 shadow-md">
                        Chat limpo. Como posso ajudar agora?
                    </div>
                </div>
            `;
        }

        // Initialize with expanded data
        initData();
        // Load Barbarian by default as it is first alphabetically
        loadClass("B√°rbaro");
    </script>
</body>
</html>
